import{r as p,c as we,g as Ce,b as Me,u as Ue,j as e,a as ie,B as Pe}from"./index-DoGYxv9T.js";import{G as L}from"./ess-121-BLXCrdn4.js";import{M as oe}from"./index-Bp9tcAeh.js";import{U as Oe,F as k}from"./UserSideBar-CjrVd-Lf.js";import{A as ke,F as de}from"./AdminNavbar-BPVSybcJ.js";import"./index-CUuEaMtD.js";var ce={exports:{}};(function(U,W){(function(C,N){U.exports=N(p)})(we,function(_){return function(C){var N={};function h(o){if(N[o])return N[o].exports;var u=N[o]={i:o,l:!1,exports:{}};return C[o].call(u.exports,u,u.exports,h),u.l=!0,u.exports}return h.m=C,h.c=N,h.d=function(o,u,b){h.o(o,u)||Object.defineProperty(o,u,{enumerable:!0,get:b})},h.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},h.t=function(o,u){if(u&1&&(o=h(o)),u&8||u&4&&typeof o=="object"&&o&&o.__esModule)return o;var b=Object.create(null);if(h.r(b),Object.defineProperty(b,"default",{enumerable:!0,value:o}),u&2&&typeof o!="string")for(var w in o)h.d(b,w,(function(P){return o[P]}).bind(null,w));return b},h.n=function(o){var u=o&&o.__esModule?function(){return o.default}:function(){return o};return h.d(u,"a",u),u},h.o=function(o,u){return Object.prototype.hasOwnProperty.call(o,u)},h.p="",h(h.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(C,N,h){h.r(N);var o=h("react"),u=function(){var f=function(d,t){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var n in i)i.hasOwnProperty(n)&&(a[n]=i[n])},f(d,t)};return function(d,t){f(d,t);function a(){this.constructor=d}d.prototype=t===null?Object.create(t):(a.prototype=t.prototype,new a)}}(),b=function(){return b=Object.assign||function(f){for(var d,t=1,a=arguments.length;t<a;t++){d=arguments[t];for(var i in d)Object.prototype.hasOwnProperty.call(d,i)&&(f[i]=d[i])}return f},b.apply(this,arguments)},w=function(f,d){var t={};for(var a in f)Object.prototype.hasOwnProperty.call(f,a)&&d.indexOf(a)<0&&(t[a]=f[a]);if(f!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(f);i<a.length;i++)d.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(f,a[i])&&(t[a[i]]=f[a[i]]);return t};(function(){typeof window>"u"||(navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(d){var t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return t?new Promise(function(a,i){t.call(navigator,d,a,i)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}))})();function P(){return!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)}var O=function(f){u(d,f);function d(t){var a=f.call(this,t)||this;return a.canvas=null,a.ctx=null,a.requestUserMediaId=0,a.unmounted=!1,a.state={hasUserMedia:!1},a}return d.prototype.componentDidMount=function(){var t=this,a=t.state,i=t.props;if(this.unmounted=!1,!P()){i.onUserMediaError("getUserMedia not supported");return}a.hasUserMedia||this.requestUserMedia(),i.children&&typeof i.children!="function"&&console.warn("children must be a function")},d.prototype.componentDidUpdate=function(t){var a=this.props;if(!P()){a.onUserMediaError("getUserMedia not supported");return}var i=JSON.stringify(t.audioConstraints)!==JSON.stringify(a.audioConstraints),n=JSON.stringify(t.videoConstraints)!==JSON.stringify(a.videoConstraints),y=t.minScreenshotWidth!==a.minScreenshotWidth,g=t.minScreenshotHeight!==a.minScreenshotHeight;(n||y||g)&&(this.canvas=null,this.ctx=null),(i||n)&&(this.stopAndCleanup(),this.requestUserMedia())},d.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},d.stopMediaStream=function(t){t&&(t.getVideoTracks&&t.getAudioTracks?(t.getVideoTracks().map(function(a){t.removeTrack(a),a.stop()}),t.getAudioTracks().map(function(a){t.removeTrack(a),a.stop()})):t.stop())},d.prototype.stopAndCleanup=function(){var t=this.state;t.hasUserMedia&&(d.stopMediaStream(this.stream),t.src&&window.URL.revokeObjectURL(t.src))},d.prototype.getScreenshot=function(t){var a=this,i=a.state,n=a.props;if(!i.hasUserMedia)return null;var y=this.getCanvas(t);return y&&y.toDataURL(n.screenshotFormat,n.screenshotQuality)},d.prototype.getCanvas=function(t){var a=this,i=a.state,n=a.props;if(!this.video||!i.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var y=this.video.videoWidth,g=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var c=y/g;y=n.minScreenshotWidth||this.video.clientWidth,g=y/c,n.minScreenshotHeight&&g<n.minScreenshotHeight&&(g=n.minScreenshotHeight,y=g*c)}this.canvas=document.createElement("canvas"),this.canvas.width=(t==null?void 0:t.width)||y,this.canvas.height=(t==null?void 0:t.height)||g,this.ctx=this.canvas.getContext("2d")}var j=this,x=j.ctx,m=j.canvas;return x&&m&&(m.width=(t==null?void 0:t.width)||m.width,m.height=(t==null?void 0:t.height)||m.height,n.mirrored&&(x.translate(m.width,0),x.scale(-1,1)),x.imageSmoothingEnabled=n.imageSmoothing,x.drawImage(this.video,0,0,(t==null?void 0:t.width)||m.width,(t==null?void 0:t.height)||m.height),n.mirrored&&(x.scale(-1,1),x.translate(-m.width,0))),m},d.prototype.requestUserMedia=function(){var t=this,a=this.props,i=function(g,c){var j={video:typeof c<"u"?c:!0};a.audio&&(j.audio=typeof g<"u"?g:!0),t.requestUserMediaId++;var x=t.requestUserMediaId;navigator.mediaDevices.getUserMedia(j).then(function(m){t.unmounted||x!==t.requestUserMediaId?d.stopMediaStream(m):t.handleUserMedia(null,m)}).catch(function(m){t.handleUserMedia(m)})};if("mediaDevices"in navigator)i(a.audioConstraints,a.videoConstraints);else{var n=function(g){return{optional:[{sourceId:g}]}},y=function(g){var c=g.deviceId;return typeof c=="string"?c:Array.isArray(c)&&c.length>0?c[0]:typeof c=="object"&&c.ideal?c.ideal:null};MediaStreamTrack.getSources(function(g){var c=null,j=null;g.forEach(function(M){M.kind==="audio"?c=M.id:M.kind==="video"&&(j=M.id)});var x=y(a.audioConstraints);x&&(c=x);var m=y(a.videoConstraints);m&&(j=m),i(n(c),n(j))})}},d.prototype.handleUserMedia=function(t,a){var i=this.props;if(t||!a){this.setState({hasUserMedia:!1}),i.onUserMediaError(t);return}this.stream=a;try{this.video&&(this.video.srcObject=a),this.setState({hasUserMedia:!0})}catch{this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(a)})}i.onUserMedia(a)},d.prototype.render=function(){var t=this,a=this,i=a.state,n=a.props,y=n.audio;n.forceScreenshotSourceSize;var g=n.disablePictureInPicture;n.onUserMedia,n.onUserMediaError,n.screenshotFormat,n.screenshotQuality,n.minScreenshotWidth,n.minScreenshotHeight,n.audioConstraints,n.videoConstraints,n.imageSmoothing;var c=n.mirrored,j=n.style,x=j===void 0?{}:j,m=n.children,M=w(n,["audio","forceScreenshotSourceSize","disablePictureInPicture","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),A=c?b(b({},x),{transform:(x.transform||"")+" scaleX(-1)"}):x,E={getScreenshot:this.getScreenshot.bind(this)};return o.createElement(o.Fragment,null,o.createElement("video",b({autoPlay:!0,disablePictureInPicture:g,src:i.src,muted:!y,playsInline:!0,ref:function(F){t.video=F},style:A},M)),m&&m(E))},d.defaultProps={audio:!1,disablePictureInPicture:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},d}(o.Component);N.default=O},react:function(C,N){C.exports=_}}).default})})(ce);var _e=ce.exports;const Ee=Ce(_e);function Ae(U){return L({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(U)}function Fe(U){return L({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11.5 15H7a4 4 0 0 0-4 4v2"},child:[]},{tag:"path",attr:{d:"M21.378 16.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z"},child:[]},{tag:"circle",attr:{cx:"10",cy:"7",r:"4"},child:[]}]})(U)}function Ie(U){return L({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Edit"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M3.548,20.938h16.9a.5.5,0,0,0,0-1H3.548a.5.5,0,0,0,0,1Z"},child:[]},{tag:"path",attr:{d:"M9.71,17.18a2.587,2.587,0,0,0,1.12-.65l9.54-9.54a1.75,1.75,0,0,0,0-2.47l-.94-.93a1.788,1.788,0,0,0-2.47,0L7.42,13.12a2.473,2.473,0,0,0-.64,1.12L6.04,17a.737.737,0,0,0,.19.72.767.767,0,0,0,.53.22Zm.41-1.36a1.468,1.468,0,0,1-.67.39l-.97.26-1-1,.26-.97a1.521,1.521,0,0,1,.39-.67l.38-.37,1.99,1.99Zm1.09-1.08L9.22,12.75l6.73-6.73,1.99,1.99Zm8.45-8.45L18.65,7.3,16.66,5.31l1.01-1.02a.748.748,0,0,1,1.06,0l.93.94A.754.754,0,0,1,19.66,6.29Z"},child:[]}]}]}]})(U)}const le="http://13.234.46.69:3000",qe=()=>{const[U,W]=p.useState(""),[_,C]=p.useState(""),[N,h]=p.useState(""),[o,u]=p.useState(""),[b,w]=p.useState(""),[P,O]=p.useState(""),[f,d]=p.useState(""),[t,a]=p.useState(""),[i,n]=p.useState(""),[y,g]=p.useState(),[c,j]=p.useState([]),[x,m]=p.useState(""),[M,A]=p.useState(""),[E,F]=p.useState(null),[ue,B]=p.useState(null),[z,R]=p.useState(!1),[me,pe]=p.useState([]),[I,T]=p.useState(!1),[q,he]=p.useState(null),G=p.useState(null),r=Me(),fe=Ue(),ge=s=>{j(s),R(!1)},xe=()=>{R(!z)},ve=JSON.parse(localStorage.getItem("token")),be=async s=>{try{const v=await(await fetch(`https://api.postalpincode.in/pincode/${s}`)).json();if(console.log(v),v[0].Status==="Success"){const S=v[0].PostOffice[0];w(S.Name||""),O(S.District||""),d(S.State||""),a(S.Country||"")}else setError("Invalid Pincode! Please enter a valid one."),w(""),O(""),d(""),a("")}catch{setError("Failed to fetch location details. Try again later.")}},ye=s=>{const l=s.target.value.trim();n(l),l.length===6?be(l):(w(""),O(""),d(""),a(""),setError(""))},je=async()=>{try{const l=(await ie.get(`${le}/category/getAllCategory`)).data.category.sort((v,S)=>v.categoryName.localeCompare(S.categoryName));pe(l)}catch(s){console.error("Error fetching categories:",s)}};p.useEffect(()=>{je()},[]);const D=s=>{const l=s.target.files[0];if(l){const v=URL.createObjectURL(l);console.log(v),F(l),B(v)}},H=()=>{T(s=>!s)},Ne=()=>{const s=G.current.getScreenshot();he(s),T(!1),B(s)},Se=async s=>{s.preventDefault();const l=new FormData;if(l.append("name",_),l.append("email",N),l.append("phone",o),l.append("address",JSON.stringify({area:b,city:P,state:f,country:t,pincode:i})),l.append("businessCategory",c),l.append("businessName",x),l.append("businessAddress",M),q){const v=await(await fetch(q)).blob();l.append("image",v)}else E&&l.append("image",E);try{const v=await ie.post(`${le}/auth/updateProfile`,l,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${ve}`}}),S=await v.data;console.log(S.message,"adited data"),W(S),v.status===200&&(Pe("Profile Updated Successfully"),fe("/profile"))}catch(v){return console.log(v),!1}};return p.useEffect(()=>{var s,l,v,S,J,$,Z,Q,V,K,X,Y,ee,te,ae,re,se,ne;C((s=r==null?void 0:r.state)==null?void 0:s.name),h((l=r==null?void 0:r.state)==null?void 0:l.email),u((v=r==null?void 0:r.state)==null?void 0:v.phone),w((J=(S=r==null?void 0:r.state)==null?void 0:S.address)==null?void 0:J.area),O((Z=($=r==null?void 0:r.state)==null?void 0:$.address)==null?void 0:Z.city),d((V=(Q=r==null?void 0:r.state)==null?void 0:Q.address)==null?void 0:V.state),a((X=(K=r==null?void 0:r.state)==null?void 0:K.address)==null?void 0:X.country),n((ee=(Y=r==null?void 0:r.state)==null?void 0:Y.address)==null?void 0:ee.pincode),g(((te=r==null?void 0:r.state)==null?void 0:te.address)||{}),j(((ae=r==null?void 0:r.state)==null?void 0:ae.businessCategory)||[]),m((re=r==null?void 0:r.state)==null?void 0:re.businessName),A((se=r==null?void 0:r.state)==null?void 0:se.businessAddress),F((ne=r==null?void 0:r.state)==null?void 0:ne.profilePic)},[r==null?void 0:r.state]),e.jsxs(e.Fragment,{children:[e.jsx(ke,{}),e.jsx(Oe,{}),e.jsx("section",{className:"py-28",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12",children:[e.jsx("h2",{className:"py-2",children:"Profile Setting"}),e.jsx("div",{className:"card border-0 bg-base-100 shadow-xl",children:e.jsxs("form",{action:"",onSubmit:Se,className:" p-3",children:[e.jsxs("div",{className:"profilepic d-flex justify-content-between",children:[e.jsx("label",{htmlFor:"profilePictureInput",className:`rounded-md m-3 cursor-pointer overflow-hidden ${I?"disabled":""}`,style:{position:"relative",width:"150px",height:"150px",objectFit:"cover",objectPosition:"center"},children:e.jsx("img",{src:ue||E||"https://upload.wikimedia.org/wikipedia/commons/thumb/1/12/User_icon_2.svg/220px-User_icon_2.svg.png",alt:"Profile",className:"rounded-md img-flied w-100"})}),e.jsx("input",{type:"file",accept:"image/*",onChange:D,className:"hidden",name:"image",id:"profilePictureInput",disabled:I}),e.jsx("button",{type:"button",onClick:H,className:"position-absolute top-36 start-36 p-2 bg-white rounded-full mx-2",children:e.jsx(de,{})}),e.jsxs("div",{className:"d-flex d-md-none",children:[e.jsx("label",{htmlFor:"cameraInput",className:"position-absolute top-36 start-36 p-2 bg-white rounded-full mx-2 cursor-pointer",children:e.jsx(de,{})}),e.jsx("input",{type:"file",accept:"image/*",capture:"camera",id:"cameraInput",onChange:D,className:"hidden"})]}),I&&e.jsx("div",{className:"webcam-overlay d-none d-md-flex",children:e.jsxs("div",{className:"webcam-popup",children:[e.jsx(Ee,{audio:!1,ref:G,screenshotFormat:"image/jpeg",className:"webcam"}),e.jsx("button",{type:"button",onClick:Ne,className:"btn btn-primary mt-2",children:"Capture"}),e.jsx("button",{type:"button",onClick:H,className:"btn btn-secondary mt-2",children:"Close"})]})})]}),e.jsxs("div",{className:"form-detaile d-flex flex-wrap w-full py-2 d-flex",children:[e.jsxs("div",{className:"col-12 col-md-6 p-2 w-full",children:[e.jsxs("div",{className:"my-1",children:[e.jsx("label",{className:"block text-md font-medium p-2 text-bold ",children:" Name"}),e.jsxs("label",{htmlFor:"",className:"d-flex align-items-center border border-2 rounded-md p-2",children:[e.jsx("input",{type:"name",value:_,onChange:s=>C(s.target.value),className:" w-100 outline-0 "}),e.jsx(Fe,{className:"text-xl"})]})]}),e.jsxs("div",{className:"my-1",children:[e.jsx("label",{className:"block text-md font-medium p-2 text-bold ",children:" Email"}),e.jsxs("label",{htmlFor:"",className:"d-flex align-items-center border border-2 rounded-md p-2",children:[e.jsx("input",{type:"email",value:N,onChange:s=>h(s.target.value),className:" w-100 outline-0 "}),e.jsx(oe,{className:"text-xl"})]})]}),e.jsxs("div",{className:"my-1",children:[e.jsx("label",{className:"block text-md font-medium p-2 text-bold ",children:"Contact "}),e.jsxs("label",{htmlFor:"",className:"d-flex align-items-center border border-2 rounded-md p-2",children:[e.jsx("input",{type:"text",value:o,onChange:s=>u(s.target.value),className:" w-100 outline-0 "}),e.jsx(Ae,{className:"text-xl"})]})]}),e.jsxs("div",{className:"my-1",children:[e.jsx("label",{className:"block text-md font-medium p-2 text-bold ",children:"Address"}),e.jsxs("div",{className:"col-12 d-flex flex-wrap",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{htmlFor:"",className:"d-flex align-items-center border border-2 rounded-md p-2 m-1",children:[e.jsx("input",{type:"text",value:b,onChange:s=>w(s.target.value),className:" w-100 outline-0 ",placeholder:"area"}),e.jsx(k,{className:"text-xl"})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{htmlFor:"",className:"d-flex align-items-center border border-2 rounded-md p-2 m-1",children:[e.jsx("input",{type:"text",value:P,onChange:s=>O(s.target.value),className:" w-100 outline-0 ",placeholder:"city"}),e.jsx(k,{className:"text-xl"})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{htmlFor:"",className:"d-flex align-items-center border border-2 rounded-md p-2 m-1",children:[e.jsx("input",{type:"text",value:f,onChange:s=>d(s.target.value),className:" w-100 outline-0 ",placeholder:"state"}),e.jsx(k,{className:"text-xl"})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{htmlFor:"",className:"d-flex align-items-center border border-2 rounded-md p-2 my-1",children:[e.jsx("input",{type:"text",value:t,onChange:s=>a(s.target.value),className:" w-100 outline-0 ",placeholder:"country"}),e.jsx(k,{className:"text-xl"})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{htmlFor:"",className:"d-flex align-items-center border border-2 rounded-md p-2 m-1",children:[e.jsx("input",{type:"text",value:i,onChange:ye,maxLength:"6",className:" w-100 outline-0 bg-none",placeholder:"pincode"}),e.jsx(k,{className:"text-xl"})]})})]})]})]}),e.jsxs("div",{className:"col-12 col-md-6 p-2 w-full",children:[e.jsxs("div",{className:"my-1",children:[e.jsx("label",{className:"block text-md font-medium p-2 text-bold ",children:"Bussiness Name "}),e.jsxs("label",{htmlFor:"",className:"d-flex align-items-center border border-2 rounded-md p-2",children:[e.jsx("input",{type:"text",value:x,onChange:s=>m(s.target.value),className:" w-100 outline-0 "}),e.jsx(oe,{className:"text-xl"})]})]}),e.jsxs("div",{className:"my-1",children:[e.jsx("label",{className:"block text-md font-medium p-2 text-bold ",children:"Bussiness Category"}),e.jsxs("div",{className:"",children:[e.jsx("div",{className:"border border-2 text-capitalize rounded-md p-2 bg-white",onClick:xe,children:c.length>0?e.jsx("span",{className:"inline-block px-3 text-black py-1  ",children:c}):e.jsx("span",{className:"text-gray-500 ps-3 py-1",children:"Select a category"})}),z&&e.jsx("ul",{className:"z-10 border border-gray-300 bg-white w-full mt-2 rounded-md  max-h-40 overflow-y-auto",children:me.map((s,l)=>e.jsx("li",{className:`cursor-pointer px-4 py-2 text-capitalize hover:bg-green-200 ${c===s.categoryName?"bg-green-200":""}`,onClick:()=>ge(s.categoryName),children:s.categoryName},l))})]})]}),e.jsxs("div",{className:"my-2",children:[e.jsx("label",{className:"block text-md font-medium p-2 text-bold ",children:"Bussiness Address"}),e.jsxs("label",{htmlFor:"",className:"d-flex align-items-center border border-2 rounded-md p-2 m-1",children:[e.jsx("input",{type:"text",value:M,onChange:s=>A(s.target.value),className:" w-100 outline-0 "}),e.jsx(k,{className:"text-xl"})]})]})]})]}),e.jsx("div",{className:"d-flex justify-content-end",children:e.jsxs("button",{type:"submit",className:"d-flex justify-content-center bg-orange text-white px-4  py-3 px-2 rounded-md hover:bg-primary ",children:[" Update ",e.jsx(Ie,{className:"text-xl text-bold mx-2"})]})})]})})]})})})})]})};export{qe as default};
